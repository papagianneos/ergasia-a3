<!DOCTYPE html>
<html>

<style>
	body {
    	background-color: black;
        background-image: url(https://papagianneos-game.surge.sh//img/game_bg.png);
        background-size: cover;
        color: black;
        font: bold 5vh Montserrat, sans-serif;
        overflow: scroll;
        user-select: none;
        width: 100%;
        height: 100%;
    }
    
    #pateras {
        position: absolute;
        transform: translate(-50%, -50%);
        left: 50%;
        top: 50%;
        display: inline-flex;
    }
    
    .box {
    	display: inline-flex;
    	width: 250px;
        height: 450px;
        background-color: white;
        align-items: center;
        text-align: center;
        justify-content: center;
        border-radius: 2.5px;
        margin: 5px;
    }
    
    button {
    	width: 100%;
        cursor: pointer;
    }
    
    button:hover {
    	opacity: .5;
    }
    
    textarea {
    	width: 100%;
        height: 150px;
        resize: none;
    }
    
    h1 {
    	font-size: 25px;
    }
    
    h3 {
    	font-size: 15px;
    }
    
    #outputArea {
    	background-color: black;
        width: 100%;
        height: 200px;
        color: green;
        overflow: scroll;
    }
    
    #outputArea h1 {
    	font-size: 10px;
    }
</style>

<body>
 <div id="pateras">
	<div class="box">
    	
        <div style="display: block;width:80%;">
        	<h1>Διαδικτυακός Εκτελεστής JavaScript</h1>
            <textarea id="codeInput"></textarea>
        	<button id="runBtn">Run</button>
            <h3>Σταύρος Τζαβάρας, Μιχάλης Χατσιούλης, Σωτήρης Παπαγιάννης</h3>
        </div>

    </div>
    
    	<div class="box">
    	
        <div style="display: block;width:80%;">
			<h1>ΑΠΟΤΕΛΕΣΜΑ</h1>
            <div id="outputArea">
            
            </div>
        </div>

    </div>
    <div id="pateras">
    
    
    <script>
  try {

    let codeInput = document.getElementById('codeInput'),
        runBtn = document.getElementById('runBtn');

	codeInput.value = localStorage.getItem('codikasPouGraftike') != null ? localStorage.getItem('codikasPouGraftike') : '';

    function writeResultOnOutput(text) {
        let h1 = document.createElement('h1');

        h1.appendChild(document.createTextNode(text));


        document.getElementById('outputArea').appendChild(h1);
    }
    
    codeInput.addEventListener('input', () => {
        localStorage.setItem('codikasPouGraftike', codeInput.value);
    });


    runBtn.onclick = () => {
        if (codeInput.value == '') {
            writeResultOnOutput('Ε ρε φίλε πρέπει να γράψεις και κάτι');
            return;
        }
        
        switch (true) {
        	case codeInput.value == 'papagianneos': // easter egg lol
        		window.open('https://papagianneos-game.surge.sh/');
        	    writeResultOnOutput('THE MIGHTY GAME OF PAPAGIANNEOS');
        	    return
                
            case codeInput.value.startsWith('πες('): {
            	  let message = codeInput.value.replace('πες(\'', '');
                
                  message = message.replace('\')', '');
            	  alert(message);
                  writeResultOnOutput(message);
                  return
                }
                
            case codeInput.value.startsWith('πράξη('): {
            	 let math = codeInput.value.replace('πράξη(\'', '');
                
                 math = math.replace('\')', '');
                 
                 const resultString = `${math} = ${eval(math)}`;
                 
            	 alert(resultString);
                 writeResultOnOutput(resultString);
                 return
                }
        }
        
        try {
            let result = eval(codeInput.value);
            writeResultOnOutput(String(result));
        }
        catch (error) {
            writeResultOnOutput(String(error));
        }
    }


} catch (error) {
    alert(error);
    console.error(error);
}
    </script>
</body>

</html>
